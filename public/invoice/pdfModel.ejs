<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="public/dist/output.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,900;1,200&family=Poppins:wght@100;400;700;800;900&display=swap"
        rel="stylesheet">
    <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>

    <link rel='stylesheet' href='https://cdn-uicons.flaticon.com/uicons-solid-straight/css/uicons-solid-straight.css'>
    <title>Mycart</title>
</head>

<body class="font-[Montserrat]  text-gray-900">
    <!-- header -->
    <header id="header" class="w-full fixed top-0 z-40 backdrop-filter  backdrop-blur-sm h-20 md:h-28  shadow-sm ">
        <!-- nav bar -->
        <nav class="justify-between items-center w-full hidden md:flex  ">
            <!-- logo -->
            <div class="flex  items-center">
                <img src="./public/images/offiq blacklogo.png" alt="Logo" class=" md:translate-x-0  w-28 h-18 ">
            </div>
        </nav>
    </header>
    <div class="mt-28 p-3 overflow-hidden">
                <div class="w-full overflow-auto">
                    <div class="border-b-2 mt-5 mb-5  p-4">
                        <div class="md:flex justify-between">
                            <h2 class="sm:text-2xl text-xl mb-2 font-bold ">ORDER #<%= order._id %>
                            </h2>
                            <p class="font-medium">Date:<%let options={ weekday: 'short' , year: 'numeric' ,
                                    month: 'short' , day: 'numeric' }; %>
                                    <%= order.createdAt.toLocaleDateString("en-US", options) %>
                            </p>
                        </div>
                        <div>
                            <p>
                                User Id : <%=  order.userId %>
                            </p>
                            <p>
                                Order Status : <% if (order.status=='delivered' ) { %>
                                    <span
                                        class="text-sm text-green-600 font-light px-6 py-4 whitespace-nowrap">DELIVERED</span>
                                    <% }else if (order.status=='cancelled' ) { %>
                                        <span
                                            class="text-sm text-red-700 font-light px-6 py-4 whitespace-nowrap">CANCELLED</span>

                                        <% }else if (order.status=='pending' ){ %>
                                            <span
                                                class="text-sm text-yellow-600 font-light px-6 py-4 whitespace-nowrap">PENDING</span>

                                            <% } else if (order.status=='confirmed' ){ %>
                                                <span
                                                    class="text-sm text-orange-600 font-light px-6 py-4 whitespace-nowrap">CONFIRMED</span>

                                                <% } %>
                            </p>
                            <p>
                                Payment Mode : <%= order.paymentMode %>
                            </p>
                            <p>
                                Payment ID : <%= order.paymentId %>
                            </p>
                            <div class="flex justify-between ">
                                <p class="flex">
                                    Shipping Address : &nbsp <span>
                                        <%= order.shippingAddress.addressLine1 %> <br>
                                            <%= order.shippingAddress.city %> <br>
                                                <%= order.shippingAddress.pin %> <br>
                                    </span>
                                </p>
                                <p class="text-xl font-semibold">
                                    <% if (order.status!='cancelled' && order.status!='delivered' ) { %>
                                        <button data-oid="<%= order._id %>"
                                            class="btn  text-red-700  px-6 py-4 whitespace-nowrap">CANCEL
                                            ORDER
                                        </button>
                                        <% } else{%>
                                            <button data-oid="<%= order._id %>"
                                                class="btn  text-red-700  px-6 py-4 whitespace-nowrap">
                                            </button>
                                            <% } %>
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="mt-8 space-y-3 rounded-lg border bg-white px-2 py-4 sm:px-6">
                        <% products.forEach((product,i)=> { %>
                            <div class="flex  rounded-lg bg-white ">
                                <img class="m-2 h-24 w-28 rounded-md border object-cover object-center"
                                    src="<%=product.images[0]%>" alt="" />
                                <div class="flex w-full flex-col px-4 py-4">
                                    <span class="font-semibold">
                                        <%=product.name %>
                                    </span>
                                    <span class="float-right text-gray-400">
                                        quantity : <%=order.items[i].quantity %>
                                    </span>
                                    <p class="text-lg font-semibold">Total : ₹<%=product.price*order.items[i].quantity
                                            %>
                                    </p>
                                </div>
                            </div>
                            <% }); %>
                    </div>
                    <div class="border-t-2 mt-5 mb-5  p-4">
                        <p class="text-xl font-bold">
                            Coupon Discount : <%= order.offer %>
                        </p>
                        <p class="text-xl font-bold">
                            Grand total : ₹<%= order.total %>
                        </p>
                    </div>

                </div>
    </div>

</body>

</html>