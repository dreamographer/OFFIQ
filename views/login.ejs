<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="login.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <title>Sign In</title>
</head>

<body>
    <div class="container m-5 p-3" id="container">
        <div class="row m-0">
            <!-- Log in form -->
            <div class="form-container sign-in-container pe-2 mb-5 col-md-6  order-md-1 order-5">
                <form action="/login" method="post" class="pe-2 mt-md-5 ">
                    <h1 class="mb-md-5">Sign In</h1>
                    <!--   -->
                    <% if (errorMessage){ %>
                        <div class="alert alert-danger">
                            <%= errorMessage %>
                        </div>
                        <% } %>
                            <input type="text" placeholder="fullname" name="fullname" />
                            <input type="password" placeholder="Password" name="password" />
                            <button>Sign In</button>
                </form>
            </div>
            <!-- Sign up form -->

            <div class="form-container sign-up-container mb-5 mt-md-5 col-md-6 pe-0  order-md-1 order-1">
                <form action="/signup" method="post" class="pe-2" id="signupForm">
                    <p class="h1 mb-md-5">Create Account</p>
                    <input type="text" placeholder="Name" name="fullname" required />
                    <input type="email" placeholder="Email" name="email" required />
                    <input type="password" placeholder="Password" name="password" required />
                    <input type="password" placeholder="CONFIRM Password" name="Cpassword" required />
                    <button id="submitButton">Sign Up</button>
                </form>

            </div>


            <!-- overaly for mobile -->
            <div class="overlay-container-sm col-12 p-0 d-md-none">
                <div class="overlay-sm row">
                    <div class="overlay-panel-sm overlay-top col-12 ">
                        <h1>Bistro Café</h1>
                        <p class="text-center">Sip In, Sign In: Welcome Back!</p>
                        <button class="ghost signIn" id="signIn">Sign In</button>
                    </div>
                    <div class="overlay-panel-sm align-items-center overlay-bottom col-12">
                        <h1>Bistro Café</h1>
                        <p>"Coffee Dreams Begin with a Signup"</p>
                        <button class="ghost signUp" id="signUp">Sign Up</button>
                    </div>


                </div>
            </div>

            <!-- overlay for other screens -->
            <div class="overlay-container col-6 p-0 d-none d-md-block">
                <div class="overlay">
                    <div class="overlay-panel overlay-left">
                        <h1>Bistro Café</h1>
                        <p>Sip In, Sign In: Welcome Back!</p>
                        <button class="ghost signIn" id="signIn">Sign In</button>
                    </div>
                    <div class="overlay-panel overlay-right">
                        <h1>Bistro Café</h1>
                        <p>"Coffee Dreams Begin with a Signup"</p>
                        <button class="ghost signUp" id="signUp">Sign Up</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        const signupForm = document.getElementById('signupForm');
        const submitButton = document.getElementById('submitButton');

        signupForm.addEventListener('submit', (event) => {
            event.preventDefault(); // Prevent default form submission

            const fullname = signupForm.fullname.value;
            const email = signupForm.email.value;
            const password = signupForm.password.value;
            const confirmPassword = signupForm.Cpassword.value;

            const errors = [];

            if (fullname.length < 5) {
                errors.push('fullname must have at least 5 characters');
            }

            if (password !== confirmPassword) {
                errors.push('Passwords do not match');
            }

            // Basic email validation (regex)
            const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailPattern.test(email)) {
                errors.push('Invalid email format');
            }

            // Password validation: at least 8 characters with a combination of letters and numbers
            const passwordPattern = /^(?=.*[a-zA-Z])(?=.*\d).{8,}$/;
            if (!passwordPattern.test(password)) {
                errors.push('Password must be at least 8 characters and contain both letters and numbers');
            }

            if (errors.length > 0) {
                // Display error messages to the user
                const errorMessage = errors.join('\n');
                alert(errorMessage);
            } else {
                // Submit the form if there are no errors
                signupForm.submit();
            }
        });


    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.min.js"
        integrity="sha384-Rx+T1VzGupg4BHQYs2gCW9It+akI2MM/mndMCy36UVfodzcJcF0GGLxZIzObiEfa"
        crossorigin="anonymous"></script>
    <script src="https://kit.fontawesome.com/2129bb9b13.js" crossorigin="anonymous"></script>
    <script src="login.js"></script>
</body>

</html>